name: CI

on: 
  push:
    branches: 
      - master

jobs:
  build:

    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v1
    #- uses: actions/setup-dotnet@v1
    #  with:
    #    dotnet-version: '3.0.100'
    #- name: Where am I?
    #  run: |
    #    cd ${{ github.workspace }}
    #    ls
    #- name: Build
    #  run: dotnet build -c Release
    #- name: Test
    #  run: dotnet test -c Release -f netcoreapp3.0
    - name: Publish release
      run: |
        export REPOSITORY_NAME=$(basename ${{ github.repository }})
        export GITHUB_TOKEN="${{ secrets.GITHUB_TOKEN }}"
        export DEFAULT_BRANCH="master"
        bash ./publish-release.sh
